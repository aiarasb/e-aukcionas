{% extends 'AppBundle::base.html.twig' %}

{% block body %}
    <div class="container">
        <h2>Nustatymai</h2>
        {% if message is not null %}
            <div class="row bg-info message" style="padding:15px;margin-bottom:15px;">
                {{ message }}
            </div>
        {% endif %}
        <div class="row">
            <div class="col-md-4">
                <ul class="list-group">
                    <li class="list-group-item"><a href="#" id="show-user-data">Mano duomenys</a></li>
                    <li class="list-group-item"><a href="#" id="change-password">Keisti slaptažodį</a></li>
                    <li class="list-group-item"><a href="#" id="change-email">Keisti El. pašto adresą</a></li>
                    <li class="list-group-item"><a href="#" id="change-data">Redaguoti duomenis</a></li>
                    {% if user.role >= 3 %}
                        <li class="list-group-item"></li>
                        <li class="list-group-item">Visų prekių sąrašas</li>
                        <li class="list-group-item">Nepatvirtintų prekių sąrašas</li>
                    {% endif %}
                    {% if user.role >= 5 %}
                        <li class="list-group-item"></li>
                        <li class="list-group-item">Vartotojų sąrašas</li>
                    {% endif %}
                </ul>
            </div>
            <div class="col-md-8">
                <div class="change-form" id="user-data" style="display: none;">
                    <div class="row">
                        <div class="col-xs-4">
                            Vartotojo vardas
                        </div>
                        <div class="col-xs-8">
                            {{ user.username }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            El. pašto adresas
                        </div>
                        <div class="col-xs-8">
                            {{ user.email }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            Vardas
                        </div>
                        <div class="col-xs-8">
                            {{ user.firstName }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            Pavardė
                        </div>
                        <div class="col-xs-8">
                            {{ user.lastName }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            Miestas
                        </div>
                        <div class="col-xs-8">
                            {{ user.city }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            Adresas
                        </div>
                        <div class="col-xs-8">
                            {{ user.address }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            Telefono numeris
                        </div>
                        <div class="col-xs-8">
                            {{ user.phone }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            Rolė
                        </div>
                        <div class="col-xs-8">
                            {{ user.role }}
                        </div>
                    </div>
                </div>
                <div class="change-form" id="change-password-form" style="display: none;">
                    {{ form_start(passwordForm, { 'attr': {'class': 'form-horizontal'} }) }}
                        <div class="form-group">
                            <label class="col-xs-4 control-label">Senas slaptažodis:</label>
                            <div class="col-xs-8">
                                {{ form_widget(passwordForm.oldPassword, { 'attr': {'class': 'form-control' } }) }}
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-4 control-label">Naujas slaptažodis:</label>
                            <div class="col-xs-8">
                                {{ form_widget(passwordForm.newPassword, { 'attr': {'class': 'form-control' } }) }}
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary pull-right">Keisti</button>
                    {{ form_end(passwordForm) }}
                </div>
                <div class="change-form" id="change-email-form" style="display: none;">
                    {{ form_start(emailForm, { 'attr': {'class': 'form-horizontal'} }) }}
                        <div class="form-group">
                            <label class="col-xs-4 control-label">Naujas el. pašto adresas:</label>
                            <div class="col-xs-8">
                                {{ form_widget(emailForm.email, { 'attr': {'class': 'form-control' } }) }}
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary pull-right">Keisti</button>
                    {{ form_end(emailForm) }}
                </div>
                <div class="change-form" id="change-data-form" style="display: none;">
                    {{ form_start(changeDataForm, { 'attr': {'class': 'form-horizontal'} }) }}
                    <div class="form-group">
                        <label class="col-xs-4 control-label">Vardas</label>
                        <div class="col-xs-8">
                            {{ form_widget(changeDataForm.firstName, { 'attr': {'class': 'form-control' } }) }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-4 control-label">Pavardė</label>
                        <div class="col-xs-8">
                            {{ form_widget(changeDataForm.lastName, { 'attr': {'class': 'form-control' } }) }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-4 control-label">Adresas</label>
                        <div class="col-xs-8">
                            {{ form_widget(changeDataForm.address, { 'attr': {'class': 'form-control' } }) }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-4 control-label">Miestas</label>
                        <div class="col-xs-8">
                            {{ form_widget(changeDataForm.city, { 'attr': {'class': 'form-control' } }) }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-4 control-label">Telefono nr.</label>
                        <div class="col-xs-8">
                            {{ form_widget(changeDataForm.phone, { 'attr': {'class': 'form-control' } }) }}
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary pull-right">Keisti</button>
                    {{ form_end(changeDataForm) }}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascript_inline %}
    {{ parent() }}

    <script type="text/javascript">
        $(function () {
            $("#change-password").click(function (e) {
                e.preventDefault();
                $(".change-form").hide();
                $("#change-password-form").show("fast");
            });

            $("#change-email").click(function (e) {
                e.preventDefault();
                $(".change-form").hide();
                $("#change-email-form").show("fast");
            });

            $("#change-data").click(function (e) {
                e.preventDefault();
                $(".change-form").hide();
                $("#change-data-form").show("fast");
            });

            $("#show-user-data").click(function (e) {
                e.preventDefault();
                $(".change-form").hide();
                $("#user-data").show("fast");
            });
        });
    </script>

{% endblock %}
